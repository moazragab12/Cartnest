<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cartnest Product Page</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Important: Order matters for CSS - header.css needs to come before productList styles -->
    <link rel="stylesheet" href="../../css/header.css" />
    <link rel="stylesheet" href="../../css/footer.css" />
    <link rel="stylesheet" href="../../css/shared/product-card.css" />
    <link rel="stylesheet" href="../../css/shared/notifications.css" />
    <link rel="stylesheet" href="../../css/productList/style.css" />
    <link rel="stylesheet" href="../../css/shared/search.css" />
    <link rel="stylesheet" href="../../css/shared/cart-badge.css" />
    <link rel="stylesheet" href="../../css/shared/header-fixes.css" />    <!-- New animations CSS -->
    <link rel="stylesheet" href="../../css/productList/animations.css" />
    <!-- New sidebar filters CSS -->
    <link rel="stylesheet" href="../../css/productList/sidebar-filters-new.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />

    <!-- Bootstrap JS and Popper.js -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      defer
    ></script>
    <!-- Shared Scripts - Cart and Notifications -->
    <script src="../../js/shared/cart-manager.js" type="module" defer></script>
    <!-- Load notifications without type=module to ensure window.notifications is accessible -->
    <script src="../../js/shared/notifications.js" defer></script>
    <!-- Product Loader JS - Handles dynamic product loading -->
    <script
      src="../../js/productList/product-loader.js"
      type="module"
      defer
    ></script>
    <!-- Category Filter JS -->
    <script
      src="../../js/productList/category-filter.js"
      type="module"
      defer
    ></script>
    <!-- View Toggle JS -->
    <script
      src="../../js/productList/productList.js"
      type="module"
      defer
    ></script>    <!-- New animations JS - Added for filter animations -->
    <script
      src="../../js/productList/animations.js"
      type="module"
      defer
    ></script>
    <!-- New sidebar animations JS -->
    <script
      src="../../js/productList/sidebar-animations.js"
      type="module" 
      defer
    ></script>
    <!-- Navbar Categories JS - Added this script from index page -->
    <script
      src="../../js/index/navbar-categories.js"
      type="module"
      defer
    ></script>
    <!-- Special script to ensure cart badge updates correctly -->
    <script src="../../js/productList/ensure-cart-badge.js" defer></script>
    <!-- Auth Header JS - Updated to use the shared implementation -->
    <script src="../../js/shared/auth-header.js" defer></script>
    <!-- Search Functionality JS -->
    <script src="../../js/shared/search.js" defer></script>
    <!-- SVG Icon Fixer -->
    <script src="../../js/shared/svg-fixer.js" defer></script>
  </head>

  <body>
    <!-- Header -->
    <header class="header">
      <div class="left-section">
        <a
          href="../../../index.html"
          style="text-decoration: none; color: inherit"
        >
          <div class="logo-container">
            <div class="shop-bag-logo-container">
              <svg
                class="shop-bag-logo"
                width="18"
                height="22"
                viewBox="0 0 18 22"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M9.20327 0.978271C11.9153 0.978271 14.1164 3.1796 14.1164 5.88906L15.0969 5.89138C16.1834 5.89138 17.1192 6.77035 17.1867 7.85079L17.9244 19.6539C17.992 20.7361 17.1698 21.6133 16.0865 21.6133H2.32009C1.23738 21.6133 0.414609 20.7344 0.482136 19.6539L1.21983 7.85079C1.28747 6.76864 2.22126 5.89138 3.30963 5.89138H4.29016C4.29016 3.17813 6.49303 0.978271 9.20327 0.978271ZM12.1511 5.89149C12.1511 4.26503 10.8299 2.94362 9.20327 2.94362C7.5778 2.94362 6.2554 4.26421 6.2554 5.88917L12.1511 5.89149ZM4.29016 7.85657H3.30963C3.25909 7.85657 3.18415 7.92687 3.18125 7.97332L2.4589 19.648L15.9548 19.6455L15.2253 7.97332C15.2225 7.92864 15.1457 7.85657 15.0969 7.85657H14.1164V9.82181C14.1164 10.3645 13.6765 10.8044 13.1338 10.8044C12.5911 10.8044 12.1511 10.3645 12.1511 9.82181V7.85657L6.25541 7.85657L6.25541 9.82181C6.25541 10.3645 5.81547 10.8044 5.27279 10.8044C4.7301 10.8044 4.29016 10.3645 4.29016 9.82181V7.85657Z"
                  fill="white"
                />
              </svg>
            </div>
            <h1 class="logo">Cartnest</h1>
          </div>
        </a>
      </div>
      <div class="search-box">
        <form id="search-form">
          <i class="fas fa-search search-icon"></i>
          <input
            type="text"
            placeholder="Search essentials, groceries and more..."
          />
        </form>
        <!-- Search results will be dynamically added here -->
      </div>
      <div class="header-links">
        <a href="../auth/auth.html" class="sign-in-link" id="auth-link">
          <img
            src="../../../public/resources/images/svg/user-icon.svg"
            alt="User"
            class="icon-svg"
          />
          <span id="auth-text">Sign Up/Sign In</span>
        </a>
        <span class="header-divider">|</span>
        <a href="../cart/cart.html" class="cart-link">
          <img
            src="../../../public/resources/images/svg/cart-icon.svg"
            alt="Cart"
            class="icon-svg"
          />
          <span>Cart</span>
          <span id="cart-badge" class="cart-badge">0</span>
        </a>
      </div>
    </header>

    <!-- Navigation -->
    <nav class="navbar">
      <a href="#" class="active"
        >Groceries <i class="fas fa-chevron-down dropdown-icon"></i
      ></a>
      <a href="#"
        >Premium Fruits <i class="fas fa-chevron-down dropdown-icon"></i
      ></a>
      <a href="#"
        >Home & Kitchen <i class="fas fa-chevron-down dropdown-icon"></i
      ></a>
      <a href="#">Fashion <i class="fas fa-chevron-down dropdown-icon"></i></a>
      <a href="#"
        >Electronics <i class="fas fa-chevron-down dropdown-icon"></i
      ></a>
      <a href="#">Beauty <i class="fas fa-chevron-down dropdown-icon"></i></a>
      <a href="#"
        >Home Improvement <i class="fas fa-chevron-down dropdown-icon"></i
      ></a>
      <a href="#"
        >Sports, Toys & Luggage <i class="fas fa-chevron-down dropdown-icon"></i
      ></a>
    </nav>    <main class="container">
      <aside class="sidebar">
        <div class="sidebar-content">
          <!-- Status Section with Animated Dot -->
          <div class="sidebar-section">
            <div class="status">
              <div class="status-header">
                <div class="status-dot"></div>
                <span>Status</span>
              </div>
              <div class="status-text">
                <button class="btn btn-sm">Sale</button>
                Same day delivery
              </div>
            </div>
          </div>

          <hr />

          <!-- Categories with Loading Animation -->
          <details id="category-details" open>
            <summary>Category</summary>
            <ul id="category-list">
              <li class="loading-categories">
                <div class="spinner-sm"></div>
                <span>Loading categories...</span>
              </li>
            </ul>
            <a class="see-all">See all</a>
          </details>

          <hr />

          <!-- Price Range with Interactive Inputs -->
          <details open>
            <summary>Price range</summary>
            <div class="price-range-filter">
              <div class="price-inputs">
                <div class="field">
                  <span>Min</span>
                  <input type="number" class="input-min" value="0" />
                </div>
                <div class="separator">-</div>
                <div class="field">
                  <span>Max</span>
                  <input type="number" class="input-max" value="999" />
                </div>
              </div>
              <button class="apply-btn">Apply</button>
            </div>
          </details>

          <hr />

          <!-- Brand Filter with Custom Checkboxes -->
          <details open>
            <summary>Brand</summary>
            <ul>
              <li>
                <input type="checkbox" id="apple" />
                <label for="apple">Apple <span class="count">99</span></label>
              </li>
              <li>
                <input type="checkbox" id="samsung" />
                <label for="samsung">Samsung <span class="count">99</span></label>
              </li>
              <li>
                <input type="checkbox" id="xiaomi" />
                <label for="xiaomi">Xiaomi <span class="count">99</span></label>
              </li>
              <li>
                <input type="checkbox" id="oppo" />
                <label for="oppo">Oppo <span class="count">99</span></label>
              </li>
              <li>
                <input type="checkbox" id="poco" />
                <label for="poco">Poco <span class="count">99</span></label>
              </li>
              <li>
                <input type="checkbox" id="lenovo" />
                <label for="lenovo">Lenovo <span class="count">99</span></label>
              </li>
              <li>
                <input type="checkbox" id="sony" />
                <label for="sony">Sony <span class="count">99</span></label>
              </li>
            </ul>
            <a class="see-all">See all</a>
          </details>

          <hr />

          <!-- Size Filter with Hover Animations -->
          <details>
            <summary>Size</summary>
            <ul>
              <li>
                <input type="checkbox" id="size-2-7" />
                <label for="size-2-7"
                  >2.7 inch <span class="count">99</span></label
                >
              </li>
              <li>
                <input type="checkbox" id="size-3-0" />
                <label for="size-3-0"
                  >3.0 inch <span class="count">99</span></label
                >
              </li>
              <li>
                <input type="checkbox" id="size-4-0" />
                <label for="size-4-0"
                  >4.0 inch <span class="count">99</span></label
                >
              </li>
              <li>
                <input type="checkbox" id="size-4-3" />
                <label for="size-4-3"
                  >4.3 inch <span class="count">99</span></label
                >
              </li>
              <li>
                <input type="checkbox" id="size-4-7" />
                <label for="size-4-7"
                  >4.7 inch <span class="count">99</span></label
                >
              </li>
              <li>
                <input type="checkbox" id="size-5-0" />
                <label for="size-5-0"
                  >5.0 inch <span class="count">99</span></label
                >
              </li>
              <li>
                <input type="checkbox" id="size-5-5" />
                <label for="size-5-5"
                  >5.5 inch & above <span class="count">99</span></label
                >
              </li>
            </ul>
            <a class="see-all">See all</a>
          </details>

          <hr />

          <!-- Color Filter with Beautiful Color Dots -->
          <details>
            <summary>Color</summary>
            <ul class="color-list">
              <li>
                <input type="checkbox" id="color-green" />
                <label for="color-green">
                  <span class="color-dot" style="background-color: green"></span>
                  Green <span class="count">99</span>
                </label>
              </li>
              <li>
                <input type="checkbox" id="color-red" />
                <label for="color-red">
                  <span
                    class="color-dot"
                    style="background-color: #ff3333"
                  ></span>
                  Coral Red <span class="count">99</span>
                </label>
              </li>
              <li>
                <input type="checkbox" id="color-lightblue" />
                <label for="color-lightblue">
                  <span
                    class="color-dot"
                    style="background-color: #0d99ff"
                  ></span>
                  Light Blue <span class="count">99</span>
                </label>
              </li>
              <li>
                <input type="checkbox" id="color-black" />
                <label for="color-black">
                  <span class="color-dot" style="background-color: black"></span>
                  Black <span class="count">99</span>
                </label>
              </li>
            </ul>
          </details>

          <hr />

          <!-- Condition Filter -->
          <details>
            <summary>Condition</summary>
            <ul>
              <li>
                <input type="checkbox" id="new" />
                <label for="new">New <span class="count">99</span></label>
              </li>
              <li>
                <input type="checkbox" id="refurbished" />
                <label for="refurbished"
                  >Refurbished <span class="count">99</span></label
                >
              </li>
              <li>
                <input type="checkbox" id="used" />
                <label for="used">Used <span class="count">99</span></label>
              </li>
            </ul>
          </details>

          <hr />

          <!-- Rating Filter with Stars -->
          <details>
            <summary>Ratings</summary>
            <ul class="rating-list">
              <li>
                <input type="checkbox" id="rating-5" />
                <label for="rating-5">
                  <span class="stars">⭐⭐⭐⭐⭐</span>
                  <span class="count">5</span>
                </label>
              </li>
              <li>
                <input type="checkbox" id="rating-4" />
                <label for="rating-4">
                  <span class="stars">⭐⭐⭐⭐</span>
                  <span class="count">4 & up</span>
                </label>
              </li>
              <li>
                <input type="checkbox" id="rating-3" />
                <label for="rating-3">
                  <span class="stars">⭐⭐⭐</span>
                  <span class="count">3 & up</span>
                </label>
              </li>
              <li>
                <input type="checkbox" id="rating-2" />
                <label for="rating-2">
                  <span class="stars">⭐⭐</span>
                  <span class="count">2 & up</span>
                </label>
              </li>
            </ul>
          </details>

          <!-- Clear Filters Button with Animation -->
          <div class="clear-filters">
            <button class="clear-filters-btn" id="clear-filters">
              Clear all filters
            </button>
          </div>
        </div>
      </aside>
      <div class="products">
        <h2>
          <div class="filter-options">
            <div class="filter-group">
              <p>Loading...</p>            </div>
            <div class="view-options">
              <select class="feature-box items-per-page">
                <option value="6">6 per page</option>
                <option value="9">9 per page</option>
                <option value="12">12 per page</option>
              </select>
              <button class="view-btn active" title="Grid view">
                <i class="fas fa-th"></i>
              </button>
              <button class="view-btn" title="List view">
                <i class="fas fa-list"></i>
              </button>
            </div>
          </div>
        </h2>
        <div class="product-grid">
          <!-- Product cards will be dynamically loaded here via the API -->
        </div>
        <div class="pagination">
          <button class="pagination-btn" title="Previous page">
            <i class="fas fa-chevron-left"></i>
          </button>
          <button class="pagination-btn active">1</button>
          <button class="pagination-btn">2</button>
          <button class="pagination-btn">3</button>
          <button class="pagination-btn" title="Next page">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </main>

    <!-- Back to top button will be added by JavaScript -->

    <!-- Notifications will be shown via notifications.js -->
  </body>
</html>
